{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\harcr\\\\Desktop\\\\carrito jose\\\\Nueva carpeta\\\\Carrito posman\\\\aplicacion sprin3ciclo4\\\\cliente\\\\src\\\\context\\\\CartContext.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\n/* Creamos el context, se le puede pasar un valor inicial */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n\n  /* Creamos un estado para el carrito */\n  const [cartItems, setCartItems] = useState([]);\n  const [products, setProducts] = useState([]);\n\n  const getProducts = async () => {\n    await axios.get(\"http://localhost:4000/products\").then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      return setProducts(data.products);\n    });\n  };\n\n  const getProductsCart = async () => {\n    return await axios.get(\"http://localhost:4000/products-cart\").then(_ref3 => {\n      let {\n        data\n      } = _ref3;\n      return setCartItems(data.productsCart);\n    }).catch(error => console.error(error));\n  };\n\n  useEffect(() => {\n    getProducts();\n    getProductsCart();\n  }, []);\n\n  const addItemToCart = async product => {\n    const {\n      name,\n      img,\n      price\n    } = product;\n    await axios.post(\"http://localhost:4000/products-cart\", {\n      name,\n      img,\n      price\n    });\n    getProducts();\n    getProductsCart();\n  };\n\n  const editItemToCart = async (id, query, amount) => {\n    if (query === \"del\" && amount === 1) {\n      await axios.delete(`http://localhost:4000/products-cart/${id}`).then(_ref4 => {\n        let {\n          data\n        } = _ref4;\n        return console.log(data);\n      });\n    } else {\n      await axios.put(`http://localhost:4000/products-cart/${id}?query=${query}`, {\n        amount\n      }).then(_ref5 => {\n        let {\n          data\n        } = _ref5;\n        return console.log(data);\n      });\n    }\n\n    getProducts();\n    getProductsCart();\n  };\n\n  return (\n    /*#__PURE__*/\n\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\n    _jsxDEV(CartContext.Provider, {\n      value: {\n        cartItems,\n        products,\n        addItemToCart,\n        editItemToCart\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }, this)\n  );\n};\n\n_s(CartProvider, \"JnNw4OeW+BvjZtSgjbMv2qiBkUU=\");\n\n_c = CartProvider;\nexport default CartContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"sources":["C:/Users/harcr/Desktop/carrito jose/Nueva carpeta/Carrito posman/aplicacion sprin3ciclo4/cliente/src/context/CartContext.jsx"],"names":["createContext","useEffect","useState","axios","CartContext","CartProvider","children","cartItems","setCartItems","products","setProducts","getProducts","get","then","data","getProductsCart","productsCart","catch","error","console","addItemToCart","product","name","img","price","post","editItemToCart","id","query","amount","delete","log","put"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA;;;AACA,MAAMC,WAAW,gBAAGJ,aAAa,EAAjC;AAEA,OAAO,MAAMK,YAAY,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;;AAC5C;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BN,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACO,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;;AAEA,QAAMS,WAAW,GAAG,YAAY;AAC9B,UAAMR,KAAK,CACRS,GADG,CACC,gCADD,EAEHC,IAFG,CAEE;AAAA,UAAC;AAAEC,QAAAA;AAAF,OAAD;AAAA,aAAcJ,WAAW,CAACI,IAAI,CAACL,QAAN,CAAzB;AAAA,KAFF,CAAN;AAGD,GAJD;;AAMA,QAAMM,eAAe,GAAG,YAAY;AAClC,WAAO,MAAMZ,KAAK,CACfS,GADU,CACN,qCADM,EAEVC,IAFU,CAEL;AAAA,UAAC;AAAEC,QAAAA;AAAF,OAAD;AAAA,aAAcN,YAAY,CAACM,IAAI,CAACE,YAAN,CAA1B;AAAA,KAFK,EAGVC,KAHU,CAGHC,KAAD,IAAWC,OAAO,CAACD,KAAR,CAAcA,KAAd,CAHP,CAAb;AAID,GALD;;AAOAjB,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,WAAW;AACXI,IAAAA,eAAe;AAChB,GAHQ,EAGN,EAHM,CAAT;;AAKA,QAAMK,aAAa,GAAG,MAAOC,OAAP,IAAmB;AACvC,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA,GAAR;AAAaC,MAAAA;AAAb,QAAuBH,OAA7B;AAEA,UAAMlB,KAAK,CAACsB,IAAN,CAAW,qCAAX,EAAkD;AAAEH,MAAAA,IAAF;AAAQC,MAAAA,GAAR;AAAaC,MAAAA;AAAb,KAAlD,CAAN;AAEAb,IAAAA,WAAW;AACXI,IAAAA,eAAe;AAChB,GAPD;;AAWA,QAAMW,cAAc,GAAG,OAAOC,EAAP,EAAWC,KAAX,EAAkBC,MAAlB,KAA6B;AAClD,QAAID,KAAK,KAAK,KAAV,IAAmBC,MAAM,KAAK,CAAlC,EAAqC;AACnC,YAAM1B,KAAK,CACR2B,MADG,CACK,uCAAsCH,EAAG,EAD9C,EAEHd,IAFG,CAEE;AAAA,YAAC;AAAEC,UAAAA;AAAF,SAAD;AAAA,eAAcK,OAAO,CAACY,GAAR,CAAYjB,IAAZ,CAAd;AAAA,OAFF,CAAN;AAGD,KAJD,MAIO;AACL,YAAMX,KAAK,CACR6B,GADG,CACE,uCAAsCL,EAAG,UAASC,KAAM,EAD1D,EAC6D;AAC/DC,QAAAA;AAD+D,OAD7D,EAIHhB,IAJG,CAIE;AAAA,YAAC;AAAEC,UAAAA;AAAF,SAAD;AAAA,eAAcK,OAAO,CAACY,GAAR,CAAYjB,IAAZ,CAAd;AAAA,OAJF,CAAN;AAKD;;AAEDH,IAAAA,WAAW;AACXI,IAAAA,eAAe;AAChB,GAfD;;AAiBA;AAAA;;AACE;AACA,YAAC,WAAD,CAAa,QAAb;AACE,MAAA,KAAK,EAAE;AAAER,QAAAA,SAAF;AAAaE,QAAAA,QAAb;AAAuBW,QAAAA,aAAvB;AAAsCM,QAAAA;AAAtC,OADT;AAAA,gBAGGpB;AAHH;AAAA;AAAA;AAAA;AAAA;AAFF;AAQD,CA3DM;;GAAMD,Y;;KAAAA,Y;AA6Db,eAAeD,WAAf","sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n/* Creamos el context, se le puede pasar un valor inicial */\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  /* Creamos un estado para el carrito */\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const getProducts = async () => {\r\n    await axios\r\n      .get(\"http://localhost:4000/products\")\r\n      .then(({ data }) => setProducts(data.products));\r\n  };\r\n\r\n  const getProductsCart = async () => {\r\n    return await axios\r\n      .get(\"http://localhost:4000/products-cart\")\r\n      .then(({ data }) => setCartItems(data.productsCart))\r\n      .catch((error) => console.error(error));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProducts();\r\n    getProductsCart();\r\n  }, []);\r\n\r\n  const addItemToCart = async (product) => {\r\n    const { name, img, price } = product;\r\n\r\n    await axios.post(\"http://localhost:4000/products-cart\", { name, img, price });\r\n\r\n    getProducts();\r\n    getProductsCart();\r\n  };\r\n\r\n \r\n\r\n  const editItemToCart = async (id, query, amount) => {\r\n    if (query === \"del\" && amount === 1) {\r\n      await axios\r\n        .delete(`http://localhost:4000/products-cart/${id}`)\r\n        .then(({ data }) => console.log(data));\r\n    } else {\r\n      await axios\r\n        .put(`http://localhost:4000/products-cart/${id}?query=${query}`, {\r\n          amount,\r\n        })\r\n        .then(({ data }) => console.log(data));\r\n    }\r\n\r\n    getProducts();\r\n    getProductsCart();\r\n  };\r\n\r\n  return (\r\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\r\n    <CartContext.Provider\r\n      value={{ cartItems, products, addItemToCart, editItemToCart}}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartContext;\r\n"]},"metadata":{},"sourceType":"module"}